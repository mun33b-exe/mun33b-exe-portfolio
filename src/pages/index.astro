---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import SectionHeader from '../components/SectionHeader.astro';
import ProjectCard from '../components/ProjectCard.astro';
import { featuredProjects } from '../data/projects';
import { skills } from '../data/skills';
import { getSkillIcon, getCategoryIcon } from '../data/skillIcons';

const base = import.meta.env.BASE_URL;
---

<BaseLayout>
  <Navbar />
  
  <main>
    <!-- Hero Section -->
    <Hero />

    <!-- Featured Projects Section -->
    <section class="py-24 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
      <SectionHeader 
        title="Featured Projects" 
        subtitle="A selection of my recent work in mobile app development"
      />

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 fade-in">
        {featuredProjects.map((project) => (
          <ProjectCard {...project} />
        ))}
      </div>

      <div class="text-center mt-12">
        <a 
          href={`${base}projects/`}
          class="inline-flex items-center gap-2 px-6 py-3 bg-surface text-primary font-medium rounded-lg hover:bg-button transition-colors duration-300"
        >
          <span>View All Projects</span>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>
    </section>

    <!-- Skills Section -->
    <section class="py-24 px-4 sm:px-6 lg:px-8 bg-surface/30">
      <div class="max-w-7xl mx-auto">
        <SectionHeader 
          title="Skills & Expertise" 
          subtitle="Flutter development, clean architecture, and backend integrations"
        />

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 fade-in">
          {skills.map((skillGroup) => {
            const isCore = skillGroup.tier === 'core';
            const isSupporting = skillGroup.tier === 'supporting';
            
            // Card container styles based on tier
            const cardClass = isCore 
              ? 'bg-background border-accent/30 hover:border-accent/50 shadow-lg shadow-accent/5'
              : isSupporting
                ? 'bg-background border-accent/15 hover:border-accent/30 shadow-md shadow-accent/3'
                : 'bg-background border-surface hover:border-accent/15';
            
            // Heading styles based on tier
            const headingClass = isCore 
              ? 'text-xl text-accent'
              : isSupporting
                ? 'text-lg text-accent/90'
                : 'text-lg text-accent/70';
            
            // Icon container styles based on tier
            const iconClass = isCore 
              ? 'w-9 h-9 bg-accent/15 text-accent'
              : isSupporting
                ? 'w-8 h-8 bg-accent/12 text-accent/85'
                : 'w-8 h-8 bg-accent/8 text-accent/60';
            
            // Skill tag styles based on tier
            const tagClass = isCore
              ? 'bg-surface text-primary border-accent/20 group-hover:border-accent/30'
              : isSupporting
                ? 'bg-surface text-primary/90 border-accent/12 group-hover:border-accent/20'
                : 'bg-surface text-secondary border-surface group-hover:border-accent/10';
            
            return (
              <div class={`p-6 rounded-2xl border transition-all duration-300 group ${cardClass}`}>
                <h3 class={`font-semibold mb-4 flex items-center gap-3 ${headingClass}`}>
                  <span class={`flex items-center justify-center rounded-lg ${iconClass}`} set:html={getCategoryIcon(skillGroup.category)} />
                  {skillGroup.category}
                  {isCore && (
                    <span class="ml-auto text-xs font-medium px-2 py-0.5 bg-accent/10 text-accent rounded-full">Core</span>
                  )}
                </h3>
                <div class="flex flex-wrap gap-2">
                  {skillGroup.items.map((item) => (
                    <span class={`inline-flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg border transition-colors ${tagClass}`}>
                      <span class="w-4 h-4 opacity-60" set:html={getSkillIcon(item)} />
                      {item}
                    </span>
                  ))}
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-24 px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto text-center fade-in">
        <h2 class="heading-lg text-primary mb-6">
          Let's Work Together
        </h2>
        <p class="body-lg text-secondary mb-8 max-w-2xl mx-auto">
          I'm always interested in hearing about new projects and opportunities. 
          Whether you have a question or just want to say hi, feel free to reach out!
        </p>
        <a 
          href={`${base}contact/`}
          class="inline-flex items-center gap-2 px-8 py-4 bg-accent text-background font-semibold rounded-lg hover:bg-accent/90 transition-all duration-300 hover-lift"
        >
          <span>Get in Touch</span>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </a>
      </div>
    </section>
  </main>

  <Footer />

  <script>
    import { initScrollAnimations } from '../components/HeroAnimation.js';
    document.addEventListener('DOMContentLoaded', initScrollAnimations);
  </script>
</BaseLayout>
